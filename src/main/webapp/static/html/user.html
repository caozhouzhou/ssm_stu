<!--
  Created by IntelliJ IDEA.
  User: czz
  Date: 2019/9/28
  Time: 16:45
  To change this template use File | Settings | File Templates.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>用户管理</title>
    <!--<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />-->
    <meta charset="GB2312">
    <!-- Bootstrap -->
    <link href="../third_part/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../third_part/bootstrap-table-1.11.0/dist/bootstrap-table.min.css" rel="stylesheet">
    <link href="../third_part/font-awesome-4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="../third_part/jquery/jquery-3.4.1.min.js"></script>
    <script src="../third_part/bootstrap-popper-1.14.7/popper.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="../third_part/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>

    <script src="../third_part/bootstrap-table-1.11.0/dist/bootstrap-table.min.js"></script>
    <script src="../third_part/bootstrap-table-1.11.0/dist/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="../third_part/vue-2.6.10/vue.min.js"></script>
    <script src="../third_part/vue-resource-0.9.3/dist/vue-resource.min.js"></script>

</head>
<body>
<div id="app">
    <div class="header-bar">
        <p class="sub-header" id="pageTitle">用户管理</p>
    </div>
    <div>
        <!-- TABLE 部分，用于展示列表 -->
        <div :style="{'display': showCtrl.showTb}">
            <div id="toolbar">
                <div class="btn-group" role="group">
                    <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" data-trigger="hover" title="添加" @click="loadUsers">
                        <i class="fa fa-plus" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" data-trigger="hover" title="修改" @click="loadUsers">
                        <i class="fa fa-pencil" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" data-trigger="hover" title="删除" @click="loadUsers">
                        <i class="fa fa-trash" aria-hidden="true"></i>
                    </button>
                    <button type="button" class="btn btn-default" data-toggle="tooltip" data-placement="bottom" data-trigger="hover" title="刷新" @click="loadUsers()">
                        <i class="fa fa-refresh" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
            <table id="userTable" data-toolbar="#toolbar" data-pagination="true" data-show-columns="true"
                   data-search="true"></table>
        </div>


    </div>
</div>
<script type="text/javascript">
    var userTable = $('#userTable');
    var columns = [
        {
            field: 'selected',
            checkbox: true
        }, {
            field: 'id',
            title: 'ID',
            sortable: true
        }, {
            field: 'userName',
            title: '用户名',
            sortable: true
        }, {
            field: 'email',
            title: '电子邮箱',
            sortable: true
        }, {
            field: 'mobile',
            title: '手机号',
            sortable: true
        }
    ];

    var vm = new Vue({
        el: '#app',
        mounted: function () {
            var self = this;
            $("[data-toggle='tooltip']").tooltip();
            $('#userTable').bootstrapTable({
                columns: columns,
                clickToSelect:true,
                height: 680
            });

            self.loadUsers();

        },
        data:{
            showCtrl:{
                showTb:'block',
                showEdit:''
            },
            user:{
                username:'',
                passwd:'',
                email:'',
                mobile:''
            }
        },
        methods: {
            //加载路由
            loadUsers: function () {
                Vue.http.get('../../jdwa/user/list').then(function (res) {
                    $('#userTable').bootstrapTable('load', res.json());
                }, function (res) {
                    alert("ERROR!")
                });
            }
        }
    });


</script>
</body>
</html>